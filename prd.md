# Product Requirements Document (PRD)
# HexaCore AI - 주식 게시판 분석 서비스

## 1. 프로젝트 개요

### 1.1 제품명
HexaCore AI - 주식 커뮤니티 인텔리전스 플랫폼

### 1.2 목적
주식 게시판 및 커뮤니티 데이터를 수집, 분석하여 투자자들에게 실시간 시장 심리, 테마주 트렌드, 종목 모멘텀 정보를 제공하는 AI 기반 분석 서비스

### 1.3 배경
- 주식 투자 시 커뮤니티 반응과 투자 심리는 중요한 참고 지표
- 수많은 게시글을 수동으로 분석하는 것은 시간 소모적
- AI 기술을 활용하여 대량의 텍스트 데이터를 자동 분석 및 요약 가능

## 2. 핵심 목표

1. 주식 커뮤니티 게시글 자동 수집 및 분석
2. 실시간 종목별 언급량 추이 파악
3. 감정 분석을 통한 투자 심리 측정
4. 테마주 자동 그룹핑 및 트렌드 감지
5. 급등/급락 조기 경보 시스템

## 3. 핵심 기능 (MVP)

### 3.1 데이터 수집
- **게시판 크롤링**
  - 주요 주식 커뮤니티 (네이버 주식토론실, 디시인사이드, 클리앙 등)
  - 실시간 게시글 수집 및 저장
  - 종목명, 종목코드 자동 태깅
- **데이터셋 활용**
  - 기존 확보된 주식 게시판 데이터셋 import
  - CSV/JSON 형식 지원

### 3.2 언급 추이 분석
- **종목별 언급량 집계**
  - 시간대별 (1시간, 1일, 1주) 언급 횟수 추적
  - 언급량 급증 감지 알고리즘
- **급등 종목 조기 감지**
  - 평균 대비 N배 이상 언급량 증가 시 알람
  - 실시간 모니터링 대시보드
- **테마주 자동 그룹핑**
  - 동시에 언급되는 종목들 클러스터링
  - 테마별 키워드 추출 (예: "2차전지", "AI반도체")
  - 테마주 그룹 시각화 (네트워크 그래프)

### 3.3 감정 분석
- **투자 심리 파악**
  - 게시글 감정 점수 (-1 ~ +1)
  - 종목별/테마별 감정 점수 집계
  - 시계열 감정 변화 추이 그래프
- **테마별 모멘텀 점수**
  - 언급량 + 감정 점수 조합
  - "상승 모멘텀", "하락 모멘텀", "식어가는 중" 판단
  - 모멘텀 변화 알림
- **뉴스 vs 커뮤니티 반응 비교**
  - 뉴스 기사 감정 점수
  - 커뮤니티 감정 점수
  - 괴리도 분석 (투자자 과열/과냉 지표)

### 3.4 요약 및 인사이트
- **게시글 요약**
  - 제공된 AI 모델 (BART) 활용
  - Bullet point 요약, Abstract 요약, Casual 요약
  - 핵심 내용 추출
- **컨센서스 요약**
  - 여러 게시글 요약을 종합
  - 전체 커뮤니티 의견 요약
- **Q&A 인사이트**
  - 제공된 QA 모델 (FLAN-T5) 활용
  - "오늘 가장 많이 언급된 종목은?"
  - "2차전지 테마에 대한 의견은?"

### 3.5 패턴 분석 및 경고
- **과거 유사 패턴 비교**
  - 과거 유사한 언급량/감정 패턴 검색
  - 당시 주가 움직임 참고 정보 제공
- **하락 이유 분석**
  - 급락 시 관련 게시글 수집
  - 중복 키워드 추출 (예: "실적 악화", "공시")
  - 빈도 높은 키워드 경고 메시지

### 3.6 시각화
- **대시보드**
  - 실시간 인기 종목 TOP 10
  - 언급량 급증 종목
  - 테마별 모멘텀 히트맵
- **그래프**
  - 시계열 언급량 추이
  - 감정 점수 변화
  - 테마주 네트워크

## 4. 기술 스택

### 4.1 AI/ML
- **요약 모델**: `facebook/bart-large-cnn` (제공됨)
- **Q&A 모델**: `google/flan-t5-large` (제공됨)
- **감정 분석 모델**: 추가 필요 (예: `yiyanghkust/finbert-tone` 또는 한국어 모델)
- **Framework**: Transformers, PyTorch

### 4.2 Backend
- **언어**: Python 3.10+
- **웹 프레임워크**: FastAPI (추천) 또는 Flask
- **비동기 처리**: asyncio (샘플 코드 활용)
- **스케줄러**: APScheduler (주기적 크롤링)

### 4.3 데이터베이스
- **시계열 DB**: InfluxDB 또는 TimescaleDB (언급량 추이)
- **문서 DB**: MongoDB (게시글 원문)
- **캐시**: Redis (실시간 집계)

### 4.4 크롤링
- **라이브러리**: BeautifulSoup4, Selenium, Playwright
- **Rate Limiting**: 사이트별 요청 제한 준수

### 4.5 시각화
- **Frontend**: React 또는 Vue.js
- **차트**: Chart.js, D3.js
- **대시보드**: Grafana (선택사항)

## 5. 시스템 아키텍처

```
┌─────────────┐
│  게시판     │
│  크롤러     │
└──────┬──────┘
       │
       v
┌─────────────┐      ┌──────────────┐
│  원문 저장   │─────>│  전처리      │
│  (MongoDB)  │      │  (종목태깅)  │
└─────────────┘      └──────┬───────┘
                            │
                            v
                     ┌──────────────┐
                     │  AI 분석     │
                     │  - 요약      │
                     │  - 감정분석  │
                     │  - 클러스터링│
                     └──────┬───────┘
                            │
                            v
                     ┌──────────────┐
                     │  집계 & 저장 │
                     │  (InfluxDB)  │
                     └──────┬───────┘
                            │
                            v
                     ┌──────────────┐
                     │  API Server  │
                     │  (FastAPI)   │
                     └──────┬───────┘
                            │
                            v
                     ┌──────────────┐
                     │  Dashboard   │
                     │  (React)     │
                     └──────────────┘
```

## 6. 데이터 파이프라인

### 6.1 수집 단계
1. 크롤러가 주기적으로 게시판 수집 (5분 ~ 1시간 간격)
2. 원문 MongoDB 저장
3. 메타데이터 추출 (시간, 작성자, 조회수 등)

### 6.2 전처리 단계
1. 종목명/코드 자동 태깅
2. 중복 제거
3. 스팸 필터링

### 6.3 분석 단계
1. AI 요약 (BART)
2. 감정 분석 (FinBERT 등)
3. 키워드 추출 (TF-IDF, RAKE)
4. 테마 클러스터링 (K-means, DBSCAN)

### 6.4 집계 단계
1. 종목별 언급량 집계
2. 감정 점수 평균
3. 테마별 모멘텀 계산
4. 시계열 데이터 저장

### 6.5 서빙 단계
1. API 엔드포인트 제공
2. 실시간 알림 (WebSocket)
3. 대시보드 렌더링

## 7. 주요 API 엔드포인트 (예시)

```
GET  /api/stocks/trending           # 실시간 인기 종목
GET  /api/stocks/{code}/mentions    # 종목별 언급 추이
GET  /api/stocks/{code}/sentiment   # 종목별 감정 분석
GET  /api/themes                    # 테마주 그룹
GET  /api/themes/{theme}/momentum   # 테마별 모멘텀
GET  /api/alerts/spike              # 언급량 급증 알림
POST /api/summarize                 # 게시글 요약
POST /api/qa                        # Q&A 질의
```

## 8. 비기능 요구사항

### 8.1 성능
- API 응답 시간: 95% 요청 < 1초
- 크롤링 처리량: 분당 1000개 게시글
- 동시 접속자: 100명 이상 지원

### 8.2 확장성
- 마이크로서비스 아키텍처 고려
- 크롤러/분석/API 서버 독립 확장 가능

### 8.3 안정성
- 크롤러 에러 핸들링 및 재시도
- 데이터베이스 백업 (일 1회)
- 모니터링 및 로깅

### 8.4 보안
- API Rate Limiting
- 사용자 인증 (JWT)
- 크롤링 윤리 준수 (robots.txt, 요청 간격)

## 9. 개발 우선순위 (Phase)

### Phase 1: MVP (4주)
- [ ] 기본 크롤러 구현 (1개 게시판)
- [ ] MongoDB 저장
- [ ] AI 요약 API (제공된 모델 활용)
- [ ] 종목별 언급량 집계
- [ ] 간단한 대시보드 (TOP 10)

### Phase 2: 분석 고도화 (4주)
- [ ] 감정 분석 추가
- [ ] 테마주 클러스터링
- [ ] 언급량 급증 알림
- [ ] 시계열 그래프

### Phase 3: 인사이트 (4주)
- [ ] 뉴스 vs 커뮤니티 비교
- [ ] 패턴 분석
- [ ] 하락 이유 분석
- [ ] Q&A 인사이트

## 10. 성공 지표 (KPI)

- 일일 활성 사용자 (DAU): 100명+
- 크롤링 커버리지: 주요 3개 게시판 이상
- 분석 정확도: 감정 분석 80% 이상
- 조기 감지율: 급등 종목의 70% 이상을 1시간 내 감지

## 11. 리스크 및 대응

### 11.1 크롤링 차단
- **리스크**: 게시판 사이트에서 크롤링 차단
- **대응**: User-Agent 변경, IP 로테이션, 요청 간격 증가

### 11.2 AI 모델 성능
- **리스크**: 제공된 모델이 한국어 주식 게시글에 부적합
- **대응**: Fine-tuning 또는 한국어 특화 모델 교체

### 11.3 데이터 품질
- **리스크**: 스팸, 허위 정보 혼입
- **대응**: 필터링 규칙, 신뢰도 점수 도입

## 12. 향후 확장 계획

- 뉴스 기사 자동 수집 및 분석
- 주가 데이터와 통합 분석
- 백테스팅 기능 (과거 신호 정확도 검증)
- 개인화된 알림 설정
- 모바일 앱